{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{handleError,handleSuccess}from'../utils';import{ToastContainer}from'react-toastify';import'./Home.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const[loggedInUser,setLoggedInUser]=useState('');const[products,setProducts]=useState([]);const[imageCode,setImageCode]=useState('');const[images,setImages]=useState([]);const[width,setWidth]=useState(150);// Default width\nconst[height,setHeight]=useState(130);// Default height\nconst[savedLists,setSavedLists]=useState(()=>{const saved=localStorage.getItem('savedLists');return saved?JSON.parse(saved):[];});const navigate=useNavigate();useEffect(()=>{setLoggedInUser(localStorage.getItem('loggedInUser'));fetchProducts();},[]);useEffect(()=>{localStorage.setItem('savedLists',JSON.stringify(savedLists));},[savedLists]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('loggedInUser');handleSuccess('User Logged out');setTimeout(()=>{navigate('/login');},1000);};const fetchProducts=async()=>{try{const url=\"\".concat(window.location.origin,\"/products\");const headers={headers:{'Authorization':localStorage.getItem('token')}};const response=await fetch(url,headers);const result=await response.json();setProducts(result);}catch(err){handleError(err);}};const handleInputChange=e=>{setImageCode(e.target.value);};const handleSearch=async e=>{e.preventDefault();if(imageCode){const matchedImages=[];const searchPatterns=imageCode.split('').map(char=>char==='x'?'\\\\d':char).join('');const regexPattern=new RegExp(\"^\".concat(searchPatterns));for(let i=100;i<600;i++){const codeStr=i.toString();if(regexPattern.test(codeStr)){const url=\"https://http.dog/\".concat(codeStr,\".jpg\");try{const response=await fetch(url);if(response.ok){matchedImages.push(url);}else{console.error(\"Failed to fetch image for code: \".concat(codeStr));}}catch(error){console.error(\"Error fetching image for code: \".concat(codeStr),error);}}}setImages(matchedImages);}};const handleSave=()=>{const listName=prompt(\"Enter a name for your list:\");if(listName){const newList={name:listName,date:new Date().toLocaleDateString(),codes:images.map(img=>img.match(/\\d+/)[0]),images:images};setSavedLists([...savedLists,newList]);}};const handleViewLists=()=>{navigate('/listing');};return/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to Dogs World......\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"}),/*#__PURE__*/_jsx(\"div\",{children:products&&products.map((item,index)=>/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[item.name,\" : \",item.price]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Search for Images\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter response code...\",value:imageCode,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:images.length===0,children:\"Save List\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-display\",children:[images.length>0?images.map((src,index)=>/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"Response code \".concat(index),style:{width:\"\".concat(width,\"px\"),height:\"\".concat(height,\"px\")}},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No images found.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"resize-controls\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Width:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:width,onChange:e=>setWidth(Number(e.target.value))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Height:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:height,onChange:e=>setHeight(Number(e.target.value))})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleViewLists,children:\"View Saved Lists\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","handleError","handleSuccess","ToastContainer","jsx","_jsx","jsxs","_jsxs","Home","loggedInUser","setLoggedInUser","products","setProducts","imageCode","setImageCode","images","setImages","width","setWidth","height","setHeight","savedLists","setSavedLists","saved","localStorage","getItem","JSON","parse","navigate","fetchProducts","setItem","stringify","handleLogout","removeItem","setTimeout","url","concat","window","location","origin","headers","response","fetch","result","json","err","handleInputChange","e","target","value","handleSearch","preventDefault","matchedImages","searchPatterns","split","map","char","join","regexPattern","RegExp","i","codeStr","toString","test","ok","push","console","error","handleSave","listName","prompt","newList","name","date","Date","toLocaleDateString","codes","img","match","handleViewLists","className","children","onClick","item","index","price","onSubmit","type","placeholder","onChange","disabled","length","src","alt","style","Number"],"sources":["C:/Users/VAISHNAVI RATHORE/Desktop/Assignment/assignment/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { handleError, handleSuccess } from '../utils';\nimport { ToastContainer } from 'react-toastify';\nimport './Home.css';\n\nfunction Home() {\n  const [loggedInUser, setLoggedInUser] = useState('');\n  const [products, setProducts] = useState([]);\n  const [imageCode, setImageCode] = useState('');\n  const [images, setImages] = useState([]);\n  const [width, setWidth] = useState(150); // Default width\n  const [height, setHeight] = useState(130); // Default height\n  const [savedLists, setSavedLists] = useState(() => {\n    const saved = localStorage.getItem('savedLists');\n    return saved ? JSON.parse(saved) : [];\n  });\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setLoggedInUser(localStorage.getItem('loggedInUser'));\n    fetchProducts();\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('savedLists', JSON.stringify(savedLists));\n  }, [savedLists]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('loggedInUser');\n    handleSuccess('User Logged out');\n    setTimeout(() => {\n      navigate('/login');\n    }, 1000);\n  };\n\n  const fetchProducts = async () => {\n    try {\n      const url = `${window.location.origin}/products`;\n      const headers = {\n        headers: {\n          'Authorization': localStorage.getItem('token')\n        }\n      };\n      const response = await fetch(url, headers);\n      const result = await response.json();\n      setProducts(result);\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setImageCode(e.target.value);\n  };\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n\n    if (imageCode) {\n      const matchedImages = [];\n      const searchPatterns = imageCode.split('').map((char) => (char === 'x' ? '\\\\d' : char)).join('');\n      const regexPattern = new RegExp(`^${searchPatterns}`);\n      \n      for (let i = 100; i < 600; i++) {\n        const codeStr = i.toString();\n        if (regexPattern.test(codeStr)) {\n          const url = `https://http.dog/${codeStr}.jpg`;\n          try {\n            const response = await fetch(url);\n            if (response.ok) {\n              matchedImages.push(url);\n            } else {\n              console.error(`Failed to fetch image for code: ${codeStr}`);\n            }\n          } catch (error) {\n            console.error(`Error fetching image for code: ${codeStr}`, error);\n          }\n        }\n      }\n      setImages(matchedImages);\n    }\n  };\n\n  const handleSave = () => {\n    const listName = prompt(\"Enter a name for your list:\");\n    if (listName) {\n      const newList = {\n        name: listName,\n        date: new Date().toLocaleDateString(),\n        codes: images.map(img => img.match(/\\d+/)[0]),\n        images: images\n      };\n      setSavedLists([...savedLists, newList]);\n    }\n  };\n\n  const handleViewLists = () => {\n    navigate('/listing');\n  };\n\n  return (\n    <div className='header'>\n      <h1>Welcome to Dogs World......</h1>\n      <button  onClick={handleLogout}>Logout</button>\n      <div>\n        {products && products.map((item, index) => (\n          <ul key={index}>\n            <span>{item.name} : {item.price}</span>\n          </ul>\n        ))}\n      </div>\n      <div className=\"home-container\">\n        <div className=\"search-container\">\n          <h1>Search for Images</h1>\n          <form onSubmit={handleSearch}>\n            <input\n              type=\"text\"\n              placeholder=\"Enter response code...\"\n              value={imageCode}\n              onChange={handleInputChange}\n            />\n            <button type=\"submit\">Search</button>\n          </form>\n          <button onClick={handleSave} disabled={images.length === 0}>Save List</button>\n        </div>\n        <div className=\"image-display\">\n          {images.length > 0 ? (\n            images.map((src, index) => (\n              <img\n                key={index}\n                src={src}\n                alt={`Response code ${index}`}\n                style={{ width: `${width}px`, height: `${height}px` }}\n              />\n            ))\n          ) : (\n            <p>No images found.</p>\n          )}\n          <div className=\"resize-controls\">\n            <label>\n              Width:\n              <input\n                type=\"number\"\n                value={width}\n                onChange={(e) => setWidth(Number(e.target.value))}\n              />\n            </label>\n            <label>\n              Height:\n              <input\n                type=\"number\"\n                value={height}\n                onChange={(e) => setHeight(Number(e.target.value))}\n              />\n            </label>\n          </div>\n        </div>\n        <button onClick={handleViewLists}>View Saved Lists</button>\n      </div>\n      <ToastContainer />\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}